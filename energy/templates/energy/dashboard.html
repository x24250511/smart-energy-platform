{% extends 'accounts/base.html' %}

{% block title %}Dashboard - Smart Energy Platform{% endblock %}

{% block content %}
<h2>Welcome, {{ user.name }}</h2>
<p>Energy Number: {{ user.energy_number }}</p>

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin: 2rem 0;">
    <div style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
        <h3>Generated</h3>
        <p style="font-size: 2rem; font-weight: bold; color: #27ae60;">{{ user.generated }} kWh</p>
    </div>
    <div style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
        <h3>Consumed</h3>
        <p style="font-size: 2rem; font-weight: bold; color: #e74c3c;">{{ user.consumed }} kWh</p>
    </div>
    <div style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
        <h3>Surplus</h3>
        <p style="font-size: 2rem; font-weight: bold; color: #3498db;">{{ surplus }} kWh</p>
    </div>
    <div style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
        <h3>Credits</h3>
        <p style="font-size: 2rem; font-weight: bold; color: #f39c12;">{{ user.credits }}</p>
    </div>
</div>

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin: 2rem 0;">
    <a href="{% url 'energy:update_energy' %}" class="btn">Update Energy</a>
    <a href="{% url 'energy:buyback' %}" class="btn">Buyback</a>
    <a href="{% url 'energy:loan' %}" class="btn">Loan Energy</a>
    <a href="{% url 'energy:donation' %}" class="btn">Donate Energy</a>
</div>

<h3>Recent Transactions</h3>
<div style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-top: 1rem;">
    {% if recent_transactions %}
        <table style="width: 100%; border-collapse: collapse;">
            <tr style="border-bottom: 2px solid #ddd;">
                <th style="padding: 0.75rem; text-align: left;">Type</th>
                <th style="padding: 0.75rem; text-align: left;">Amount</th>
                <th style="padding: 0.75rem; text-align: left;">Date</th>
            </tr>
            {% for transaction in recent_transactions %}
            <tr style="border-bottom: 1px solid #eee;">
                <td style="padding: 0.75rem;">{{ transaction.transaction_type }}</td>
                <td style="padding: 0.75rem;">{{ transaction.amount }} kWh</td>
                <td style="padding: 0.75rem;">{{ transaction.timestamp|date:"Y-m-d H:i" }}</td>
            </tr>
            {% endfor %}
        </table>
    {% else %}
        <p>No transactions yet</p>
    {% endif %}
</div>
{% endblock %}
